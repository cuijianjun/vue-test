{"version":3,"sources":["cart.js"],"names":[],"mappings":"AAAA;;;AAGA;AACA","file":"cart-compiled.js","sourcesContent":["/**\n * Created by PPLU on 2017/8/23.\n */\n// 购物车模块\n/*import shop from '../../api/shop'\n import * as types from '../mutation-types'\n\n // initial state\n // shape: [{ id, quantity }]\n const state = {\n added: [],\n checkoutStatus: null\n }\n\n // getters\n const getters = {\n checkoutStatus: state => state.checkoutStatus\n }\n\n // actions\n const actions = {\n checkout ({ commit, state }, products) {\n const savedCartItems = [...state.added]\n commit(types.CHECKOUT_REQUEST)\n shop.buyProducts(\n products,\n () => commit(types.CHECKOUT_SUCCESS),\n () => commit(types.CHECKOUT_FAILURE, { savedCartItems })\n )\n }\n }\n\n // mutations\n const mutations = {\n [types.ADD_TO_CART] (state, { id }) {\n state.lastCheckout = null\n const record = state.added.find(p => p.id === id)\n if (!record) {\n state.added.push({\n id,\n quantity: 1\n })\n } else {\n record.quantity++\n }\n },\n\n [types.CHECKOUT_REQUEST] (state) {\n // clear cart\n state.added = []\n state.checkoutStatus = null\n },\n\n [types.CHECKOUT_SUCCESS] (state) {\n state.checkoutStatus = 'successful'\n },\n\n [types.CHECKOUT_FAILURE] (state, { savedCartItems }) {\n // rollback to the cart saved before sending the request\n state.added = savedCartItems\n state.checkoutStatus = 'failed'\n }\n }\n\n export default {\n state,\n getters,\n actions,\n mutations\n }*/\n"]}