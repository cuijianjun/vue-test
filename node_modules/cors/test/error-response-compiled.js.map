{"version":3,"sources":["error-response.js"],"names":[],"mappings":"AAAC,aAAY;AACX;;AAEA;;AAEA,MAAI,SAAS,QAAQ,QAAR,CAAb;AAAA,MACE,UAAU,QAAQ,SAAR,CADZ;AAAA,MAEE,YAAY,QAAQ,WAAR,CAFd;AAAA,MAGE,OAAO,QAAQ,QAAR,CAHT;;AAKA,MAAI,GAAJ;;AAEA;;AAEA,QAAM,SAAN;AACA,MAAI,GAAJ,CAAQ,MAAR;;AAEA,MAAI,IAAJ,CAAS,eAAT,EAA0B,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAClD,SAAK,IAAI,KAAJ,CAAU,MAAV,CAAL;AACD,GAFD;;AAIA,MAAI,IAAJ,CAAS,cAAT,EAAyB,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AACjD,SAAK,IAAI,KAAJ,CAAU,KAAV,CAAL;AACD,GAFD;;AAIA,MAAI,IAAJ,CAAS,eAAT,EAA0B,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAClD;AACD,GAFD;;AAIA,MAAI,GAAJ,CAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,EAAyB,IAAzB,EAA+B;AACrC,QAAI,IAAI,OAAJ,KAAgB,KAApB,EAA2B;AACzB,UAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,cAArB;AACD,KAFD,MAEO;AACL,WAAK,GAAL;AACD;AACF,GAND;;AAQA;;AAEA,WAAS,gBAAT,EAA2B,YAAY;AACrC,OAAG,KAAH,EAAU,UAAU,IAAV,EAAgB;AACxB,gBAAU,GAAV,EACG,IADH,CACQ,eADR,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvB,eAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB;AACA,YAAI,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAkD,GAAlD,CAAsD,GAAtD;AACA,YAAI,IAAJ,CAAS,MAAT,CAAgB,UAAhB,CAA2B,aAA3B;AACA;AACD,OARH;AASD,KAVD;;AAYA,OAAG,KAAH,EAAU,UAAU,IAAV,EAAgB;AACxB,gBAAU,GAAV,EACG,IADH,CACQ,cADR,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvB,eAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB;AACA,YAAI,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAkD,GAAlD,CAAsD,GAAtD;AACA,YAAI,IAAJ,CAAS,MAAT,CAAgB,GAAhB,CAAoB,cAApB;AACA;AACD,OARH;AASD,KAVD;;AAYA,OAAG,KAAH,EAAU,UAAU,IAAV,EAAgB;AACxB,gBAAU,GAAV,EACG,IADH,CACQ,eADR,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvB,eAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB;AACA,YAAI,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAkD,GAAlD,CAAsD,GAAtD;AACA;AACD,OAPH;AAQD,KATD;AAUD,GAnCD;AAqCD,CA5EA,GAAD","file":"error-response-compiled.js","sourcesContent":["(function () {\n  /*global describe, it*/\n\n  'use strict';\n\n  var should = require('should'),\n    express = require('express'),\n    supertest = require('supertest'),\n    cors = require('../lib');\n\n  var app;\n\n  /* -------------------------------------------------------------------------- */\n\n  app = express();\n  app.use(cors());\n\n  app.post('/five-hundred', function (req, res, next) {\n    next(new Error('nope'));\n  });\n\n  app.post('/four-oh-one', function (req, res, next) {\n    next(new Error('401'));\n  });\n\n  app.post('/four-oh-four', function (req, res, next) {\n    next();\n  });\n\n  app.use(function (err, req, res, next) {\n    if (err.message === '401') {\n      res.status(401).send('unauthorized');\n    } else {\n      next(err);\n    }\n  });\n\n  /* -------------------------------------------------------------------------- */\n\n  describe('error response', function () {\n    it('500', function (done) {\n      supertest(app)\n        .post('/five-hundred')\n        .expect(500)\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          res.text.should.containEql('Error: nope');\n          done();\n        });\n    });\n\n    it('401', function (done) {\n      supertest(app)\n        .post('/four-oh-one')\n        .expect(401)\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          res.text.should.eql('unauthorized');\n          done();\n        });\n    });\n\n    it('404', function (done) {\n      supertest(app)\n        .post('/four-oh-four')\n        .expect(404)\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          done();\n        });\n    });\n  });\n\n}());\n"]}