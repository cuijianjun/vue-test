{"version":3,"sources":["issue-2.js"],"names":[],"mappings":"AAAC,aAAY;AACX;;AAEA;;AAEA,MAAI,SAAS,QAAQ,QAAR,CAAb;AAAA,MACE,UAAU,QAAQ,SAAR,CADZ;AAAA,MAEE,YAAY,QAAQ,WAAR,CAFd;AAAA,MAGE,OAAO,QAAQ,QAAR,CAHT;;AAKA,MAAI,GAAJ,EACE,WADF;;AAGA;;AAEA,QAAM,SAAN;AACA,gBAAc;AACZ,YAAQ,IADI;AAEZ,aAAS,CAAC,MAAD,CAFG;AAGZ,iBAAa,IAHD;AAIZ,YAAQ;AAJI,GAAd;AAMA,MAAI,OAAJ,CAAY,YAAZ,EAA0B,KAAK,WAAL,CAA1B;AACA,MAAI,IAAJ,CAAS,YAAT,EAAuB,KAAK,WAAL,CAAvB,EAA0C,UAAU,GAAV,EAAe,GAAf,EAAoB;AAC5D,QAAI,IAAJ,CAAS,OAAT;AACD,GAFD;;AAIA;;AAEA,WAAS,WAAT,EAAsB,YAAY;AAChC,OAAG,eAAH,EAAoB,UAAU,IAAV,EAAgB;AAClC,gBAAU,GAAV,EACG,OADH,CACW,YADX,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,QAHP,EAGiB,oBAHjB,EAIG,GAJH,CAIO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvB,eAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB;AACA,YAAI,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAkD,GAAlD,CAAsD,oBAAtD;AACA;AACD,OARH;AASD,KAVD;AAWA,OAAG,YAAH,EAAiB,UAAU,IAAV,EAAgB;AAC/B,gBAAU,GAAV,EACG,IADH,CACQ,YADR,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,QAHP,EAGiB,oBAHjB,EAIG,GAJH,CAIO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvB,eAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB;AACA,YAAI,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAkD,GAAlD,CAAsD,oBAAtD;AACA,YAAI,IAAJ,CAAS,MAAT,CAAgB,GAAhB,CAAoB,OAApB;AACA;AACD,OATH;AAUD,KAXD;AAYD,GAxBD;AA0BD,CAvDA,GAAD","file":"issue-2-compiled.js","sourcesContent":["(function () {\n  /*global describe, it*/\n\n  'use strict';\n\n  var should = require('should'),\n    express = require('express'),\n    supertest = require('supertest'),\n    cors = require('../lib');\n\n  var app,\n    corsOptions;\n\n  /* -------------------------------------------------------------------------- */\n\n  app = express();\n  corsOptions = {\n    origin: true,\n    methods: ['POST'],\n    credentials: true,\n    maxAge: 3600\n  };\n  app.options('/api/login', cors(corsOptions));\n  app.post('/api/login', cors(corsOptions), function (req, res) {\n    res.send('LOGIN');\n  });\n\n  /* -------------------------------------------------------------------------- */\n\n  describe('issue  #2', function () {\n    it('OPTIONS works', function (done) {\n      supertest(app)\n        .options('/api/login')\n        .expect(204)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('http://example.com');\n          done();\n        });\n    });\n    it('POST works', function (done) {\n      supertest(app)\n        .post('/api/login')\n        .expect(200)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('http://example.com');\n          res.text.should.eql('LOGIN');\n          done();\n        });\n    });\n  });\n\n}());\n"]}