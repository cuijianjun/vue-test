{"version":3,"sources":["issue-31.js"],"names":[],"mappings":"AAAC,aAAY;AACX;;AAEA;;AAEA,MAAI,SAAS,QAAQ,QAAR,CAAb;AAAA,MACE,UAAU,QAAQ,SAAR,CADZ;AAAA,MAEE,YAAY,QAAQ,WAAR,CAFd;AAAA,MAGE,OAAO,QAAQ,QAAR,CAHT;;AAKA,MAAI,GAAJ,EACE,UADF,EAEE,WAFF;;AAIA;;AAEA,gBAAc,IAAI,QAAQ,MAAZ,EAAd;AACA,cAAY,GAAZ,CAAgB,GAAhB,EAAqB,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvC,QAAI,IAAJ,CAAS,aAAT;AACD,GAFD;;AAIA,eAAa,IAAI,QAAQ,MAAZ,EAAb;AACA,aAAW,GAAX,CAAe,QAAf,EAAyB,WAAzB;;AAEA,QAAM,SAAN;AACA,MAAI,GAAJ,CAAQ,MAAR;AACA,MAAI,GAAJ,CAAQ,UAAR;;AAEA;;AAEA,WAAS,YAAT,EAAuB,YAAY;AACjC,OAAG,eAAH,EAAoB,UAAU,IAAV,EAAgB;AAClC,gBAAU,GAAV,EACG,OADH,CACW,QADX,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,QAHP,EAGiB,oBAHjB,EAIG,GAJH,CAIO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvB,eAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB;AACA,YAAI,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAkD,GAAlD,CAAsD,GAAtD;AACA;AACD,OARH;AASD,KAVD;;AAYA,OAAG,WAAH,EAAgB,UAAU,IAAV,EAAgB;AAC9B,gBAAU,GAAV,EACG,GADH,CACO,QADP,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,QAHP,EAGiB,oBAHjB,EAIG,GAJH,CAIO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvB,eAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB;AACA,YAAI,OAAJ,CAAY,6BAAZ,EAA2C,MAA3C,CAAkD,GAAlD,CAAsD,GAAtD;AACA,YAAI,IAAJ,CAAS,MAAT,CAAgB,GAAhB,CAAoB,aAApB;AACA;AACD,OATH;AAUD,KAXD;AAYD,GAzBD;AA2BD,CAzDA,GAAD","file":"issue-31-compiled.js","sourcesContent":["(function () {\n  /*global describe, it*/\n\n  'use strict';\n\n  var should = require('should'),\n    express = require('express'),\n    supertest = require('supertest'),\n    cors = require('../lib');\n\n  var app,\n    mainRouter,\n    itemsRouter;\n\n  /* -------------------------------------------------------------------------- */\n\n  itemsRouter = new express.Router();\n  itemsRouter.get('/', function (req, res) {\n    res.send('hello world');\n  });\n\n  mainRouter = new express.Router();\n  mainRouter.use('/items', itemsRouter);\n\n  app = express();\n  app.use(cors());\n  app.use(mainRouter);\n\n  /* -------------------------------------------------------------------------- */\n\n  describe('issue  #31', function () {\n    it('OPTIONS works', function (done) {\n      supertest(app)\n        .options('/items')\n        .expect(204)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          done();\n        });\n    });\n\n    it('GET works', function (done) {\n      supertest(app)\n        .get('/items')\n        .expect(200)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          res.text.should.eql('hello world');\n          done();\n        });\n    });\n  });\n\n}());\n"]}