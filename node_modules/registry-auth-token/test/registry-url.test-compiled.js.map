{"version":3,"sources":["registry-url.test.js"],"names":[],"mappings":"AAAA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,kBAAkB,QAAQ,kBAAR,CAAtB;;AAEA,IAAI,YAAY,KAAK,IAAL,CAAU,SAAV,EAAqB,IAArB,EAA2B,QAA3B,CAAhB;AACA,IAAI,YAAY,MAAM,SAAtB;AACA,IAAI,WAAW,MAAM,QAArB;AACA,IAAI,KAAK,MAAM,EAAf;;AAEA,SAAS,cAAT,EAAyB,YAAY;AACnC,YAAU,UAAU,IAAV,EAAgB;AACxB,OAAG,MAAH,CAAU,SAAV,EAAqB,YAAY;AAC/B;AACD,KAFD;AAGD,GAJD;;AAMA,KAAG,yCAAH,EAA8C,YAAY;AACxD,QAAI,iBAAiB,gBAAgB,iBAAhB,CAArB;AACA;AACD,GAHD;;AAKA,KAAG,6DAAH,EAAkE,UAAU,IAAV,EAAgB;AAChF,OAAG,SAAH,CAAa,SAAb,EAAwB,sCAAxB,EAAgE,UAAU,GAAV,EAAe;AAC7E,UAAI,iBAAiB,gBAAgB,iBAAhB,CAArB;AACA,aAAO,CAAC,GAAR,EAAa,GAAb;AACA,aAAO,KAAP,CAAa,eAAe,YAAf,CAAb,EAA2C,6BAA3C;AACA;AACD,KALD;AAMD,GAPD;;AASA,KAAG,uDAAH,EAA4D,UAAU,IAAV,EAAgB;AAC1E,OAAG,SAAH,CAAa,SAAb,EAAwB,4CAAxB,EAAsE,UAAU,GAAV,EAAe;AACnF,UAAI,iBAAiB,gBAAgB,iBAAhB,CAArB;AACA,aAAO,CAAC,GAAR,EAAa,GAAb;AACA,aAAO,KAAP,CAAa,eAAe,YAAf,CAAb,EAA2C,wBAA3C;AACA;AACD,KALD;AAMD,GAPD;;AASA,KAAG,6CAAH,EAAkD,UAAU,IAAV,EAAgB;AAChE,OAAG,SAAH,CAAa,SAAb,EAAwB,2CAAxB,EAAqE,UAAU,GAAV,EAAe;AAClF,UAAI,iBAAiB,gBAAgB,iBAAhB,CAArB;AACA,aAAO,CAAC,GAAR,EAAa,GAAb;AACA,aAAO,KAAP,CAAa,eAAe,YAAf,CAAb,EAA2C,wBAA3C;AACA;AACD,KALD;AAMD,GAPD;;AASA,KAAG,mDAAH,EAAwD,UAAU,IAAV,EAAgB;AACtE,QAAI,UAAU,CACZ,qCADY,EAEZ,uCAFY,EAE6B,EAF7B,EAGZ,IAHY,CAGP,IAHO,CAAd;;AAKA,OAAG,SAAH,CAAa,SAAb,EAAwB,OAAxB,EAAiC,UAAU,GAAV,EAAe;AAC9C,UAAI,iBAAiB,gBAAgB,iBAAhB,CAArB;AACA,aAAO,CAAC,GAAR,EAAa,GAAb;AACA,aAAO,KAAP,CAAa,gBAAb,EAA+B,4BAA/B;AACA;AACD,KALD;AAMD,GAZD;AAaD,CApDD","file":"registry-url.test-compiled.js","sourcesContent":["var fs = require('fs')\nvar path = require('path')\nvar mocha = require('mocha')\nvar assert = require('assert')\nvar requireUncached = require('require-uncached')\n\nvar npmRcPath = path.join(__dirname, '..', '.npmrc')\nvar afterEach = mocha.afterEach\nvar describe = mocha.describe\nvar it = mocha.it\n\ndescribe('registry-url', function () {\n  afterEach(function (done) {\n    fs.unlink(npmRcPath, function () {\n      done()\n    })\n  })\n\n  it('should read global if no local is found', function () {\n    var getRegistryUrl = requireUncached('../registry-url')\n    getRegistryUrl()\n  })\n\n  it('should return default registry if no url is given for scope', function (done) {\n    fs.writeFile(npmRcPath, 'registry=https://registry.npmjs.org/', function (err) {\n      var getRegistryUrl = requireUncached('../registry-url')\n      assert(!err, err)\n      assert.equal(getRegistryUrl('@somescope'), 'https://registry.npmjs.org/')\n      done()\n    })\n  })\n\n  it('should return registry url if url is given for scope ', function (done) {\n    fs.writeFile(npmRcPath, '@somescope:registry=https://some.registry/', function (err) {\n      var getRegistryUrl = requireUncached('../registry-url')\n      assert(!err, err)\n      assert.equal(getRegistryUrl('@somescope'), 'https://some.registry/')\n      done()\n    })\n  })\n\n  it('should append trailing slash if not present', function (done) {\n    fs.writeFile(npmRcPath, '@somescope:registry=https://some.registry', function (err) {\n      var getRegistryUrl = requireUncached('../registry-url')\n      assert(!err, err)\n      assert.equal(getRegistryUrl('@somescope'), 'https://some.registry/')\n      done()\n    })\n  })\n\n  it('should return configured global registry if given', function (done) {\n    var content = [\n      'registry=http://registry.foobar.eu/',\n      '@somescope:registry=https://some.url/', ''\n    ].join('\\n')\n\n    fs.writeFile(npmRcPath, content, function (err) {\n      var getRegistryUrl = requireUncached('../registry-url')\n      assert(!err, err)\n      assert.equal(getRegistryUrl(), 'http://registry.foobar.eu/')\n      done()\n    })\n  })\n})\n"]}