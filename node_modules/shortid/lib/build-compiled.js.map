{"version":3,"sources":["build.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,SAAS,QAAQ,UAAR,CAAb;AACA,IAAI,WAAW,QAAQ,YAAR,CAAf;;AAEA;AACA;AACA;AACA,IAAI,cAAc,aAAlB;;AAEA;AACA;AACA,IAAI,UAAU,CAAd;;AAEA;AACA,IAAI,OAAJ;;AAEA;AACA,IAAI,eAAJ;;AAEA;;;;AAIA,SAAS,KAAT,CAAe,eAAf,EAAgC;;AAE5B,QAAI,MAAM,EAAV;;AAEA,QAAI,UAAU,KAAK,KAAL,CAAW,CAAC,KAAK,GAAL,KAAa,WAAd,IAA6B,KAAxC,CAAd;;AAEA,QAAI,YAAY,eAAhB,EAAiC;AAC7B;AACH,KAFD,MAEO;AACH,kBAAU,CAAV;AACA,0BAAkB,OAAlB;AACH;;AAED,UAAM,MAAM,OAAO,SAAS,MAAhB,EAAwB,OAAxB,CAAZ;AACA,UAAM,MAAM,OAAO,SAAS,MAAhB,EAAwB,eAAxB,CAAZ;AACA,QAAI,UAAU,CAAd,EAAiB;AACb,cAAM,MAAM,OAAO,SAAS,MAAhB,EAAwB,OAAxB,CAAZ;AACH;AACD,UAAM,MAAM,OAAO,SAAS,MAAhB,EAAwB,OAAxB,CAAZ;;AAEA,WAAO,GAAP;AACH;;AAED,OAAO,OAAP,GAAiB,KAAjB","file":"build-compiled.js","sourcesContent":["'use strict';\n\nvar encode = require('./encode');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode(alphabet.lookup, version);\n    str = str + encode(alphabet.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode(alphabet.lookup, counter);\n    }\n    str = str + encode(alphabet.lookup, seconds);\n\n    return str;\n}\n\nmodule.exports = build;\n"]}