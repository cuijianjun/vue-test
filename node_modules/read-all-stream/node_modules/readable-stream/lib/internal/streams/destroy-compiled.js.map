{"version":3,"sources":["destroy.js"],"names":[],"mappings":"AAAA;;AAEA;;AAEA,IAAI,kBAAkB,QAAQ,sBAAR,CAAtB;AACA;;AAEA;AACA,SAAS,OAAT,CAAiB,GAAjB,EAAsB,EAAtB,EAA0B;AACxB,MAAI,QAAQ,IAAZ;;AAEA,MAAI,oBAAoB,KAAK,cAAL,IAAuB,KAAK,cAAL,CAAoB,SAAnE;AACA,MAAI,oBAAoB,KAAK,cAAL,IAAuB,KAAK,cAAL,CAAoB,SAAnE;;AAEA,MAAI,qBAAqB,iBAAzB,EAA4C;AAC1C,QAAI,EAAJ,EAAQ;AACN,SAAG,GAAH;AACD,KAFD,MAEO,IAAI,QAAQ,CAAC,KAAK,cAAN,IAAwB,CAAC,KAAK,cAAL,CAAoB,YAArD,CAAJ,EAAwE;AAC7E,sBAAgB,WAAhB,EAA6B,IAA7B,EAAmC,GAAnC;AACD;AACD;AACD;;AAED;AACA;;AAEA,MAAI,KAAK,cAAT,EAAyB;AACvB,SAAK,cAAL,CAAoB,SAApB,GAAgC,IAAhC;AACD;;AAED;AACA,MAAI,KAAK,cAAT,EAAyB;AACvB,SAAK,cAAL,CAAoB,SAApB,GAAgC,IAAhC;AACD;;AAED,OAAK,QAAL,CAAc,OAAO,IAArB,EAA2B,UAAU,GAAV,EAAe;AACxC,QAAI,CAAC,EAAD,IAAO,GAAX,EAAgB;AACd,sBAAgB,WAAhB,EAA6B,KAA7B,EAAoC,GAApC;AACA,UAAI,MAAM,cAAV,EAA0B;AACxB,cAAM,cAAN,CAAqB,YAArB,GAAoC,IAApC;AACD;AACF,KALD,MAKO,IAAI,EAAJ,EAAQ;AACb,SAAG,GAAH;AACD;AACF,GATD;AAUD;;AAED,SAAS,SAAT,GAAqB;AACnB,MAAI,KAAK,cAAT,EAAyB;AACvB,SAAK,cAAL,CAAoB,SAApB,GAAgC,KAAhC;AACA,SAAK,cAAL,CAAoB,OAApB,GAA8B,KAA9B;AACA,SAAK,cAAL,CAAoB,KAApB,GAA4B,KAA5B;AACA,SAAK,cAAL,CAAoB,UAApB,GAAiC,KAAjC;AACD;;AAED,MAAI,KAAK,cAAT,EAAyB;AACvB,SAAK,cAAL,CAAoB,SAApB,GAAgC,KAAhC;AACA,SAAK,cAAL,CAAoB,KAApB,GAA4B,KAA5B;AACA,SAAK,cAAL,CAAoB,MAApB,GAA6B,KAA7B;AACA,SAAK,cAAL,CAAoB,QAApB,GAA+B,KAA/B;AACA,SAAK,cAAL,CAAoB,YAApB,GAAmC,KAAnC;AACD;AACF;;AAED,SAAS,WAAT,CAAqB,IAArB,EAA2B,GAA3B,EAAgC;AAC9B,OAAK,IAAL,CAAU,OAAV,EAAmB,GAAnB;AACD;;AAED,OAAO,OAAP,GAAiB;AACf,WAAS,OADM;AAEf,aAAW;AAFI,CAAjB","file":"destroy-compiled.js","sourcesContent":["'use strict';\n\n/*<replacement>*/\n\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      processNextTick(emitErrorNT, this, err);\n    }\n    return;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      processNextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};"]}