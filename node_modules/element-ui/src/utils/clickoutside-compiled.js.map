{"version":3,"sources":["clickoutside.js"],"names":[],"mappings":"AAAA,OAAO,GAAP,MAAgB,KAAhB;AACA,SAAS,EAAT,QAAmB,0BAAnB;;AAEA,IAAM,WAAW,EAAjB;AACA,IAAM,MAAM,uBAAZ;;AAEA,IAAI,mBAAJ;;AAEA,CAAC,IAAI,SAAJ,CAAc,SAAf,IAA4B,GAAG,QAAH,EAAa,WAAb,EAA0B;AAAA,SAAM,aAAa,CAAnB;AAAA,CAA1B,CAA5B;;AAEA,CAAC,IAAI,SAAJ,CAAc,SAAf,IAA4B,GAAG,QAAH,EAAa,SAAb,EAAwB,aAAK;AACvD,WAAS,OAAT,CAAiB;AAAA,WAAQ,KAAK,GAAL,EAAU,eAAV,CAA0B,CAA1B,EAA6B,UAA7B,CAAR;AAAA,GAAjB;AACD,CAF2B,CAA5B;AAGA;;;;;;;;AAQA,eAAe;AACb,MADa,gBACR,EADQ,EACJ,OADI,EACK,KADL,EACY;AACvB,QAAM,KAAK,SAAS,IAAT,CAAc,EAAd,IAAoB,CAA/B;AACA,QAAM,kBAAkB,SAAlB,eAAkB,GAAuC;AAAA,UAA9B,OAA8B,uEAApB,EAAoB;AAAA,UAAhB,SAAgB,uEAAJ,EAAI;;AAC7D,UAAI,CAAC,MAAM,OAAP,IACF,CAAC,QAAQ,MADP,IAEF,CAAC,UAAU,MAFT,IAGF,GAAG,QAAH,CAAY,QAAQ,MAApB,CAHE,IAIF,GAAG,QAAH,CAAY,UAAU,MAAtB,CAJE,IAKF,OAAO,QAAQ,MALb,IAMD,MAAM,OAAN,CAAc,SAAd,KACA,MAAM,OAAN,CAAc,SAAd,CAAwB,QAAxB,CAAiC,QAAQ,MAAzC,KACD,MAAM,OAAN,CAAc,SAAd,CAAwB,QAAxB,CAAiC,UAAU,MAA3C,CAFC,CANH,EAQwD;;AAExD,UAAI,QAAQ,UAAR,IACF,GAAG,GAAH,EAAQ,UADN,IAEF,MAAM,OAAN,CAAc,GAAG,GAAH,EAAQ,UAAtB,CAFF,EAEqC;AACnC,cAAM,OAAN,CAAc,GAAG,GAAH,EAAQ,UAAtB;AACD,OAJD,MAIO;AACL,WAAG,GAAH,EAAQ,SAAR,IAAqB,GAAG,GAAH,EAAQ,SAAR,EAArB;AACD;AACF,KAlBD;AAmBA,OAAG,GAAH,IAAU;AACR,YADQ;AAER,sCAFQ;AAGR,kBAAY,QAAQ,UAHZ;AAIR,iBAAW,QAAQ;AAJX,KAAV;AAMD,GA5BY;AA8Bb,QA9Ba,kBA8BN,EA9BM,EA8BF,OA9BE,EA8BO;AAClB,OAAG,GAAH,EAAQ,UAAR,GAAqB,QAAQ,UAA7B;AACA,OAAG,GAAH,EAAQ,SAAR,GAAoB,QAAQ,KAA5B;AACD,GAjCY;AAmCb,QAnCa,kBAmCN,EAnCM,EAmCF;AACT,QAAI,MAAM,SAAS,MAAnB;;AAEA,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAApB,EAAyB,GAAzB,EAA8B;AAC5B,UAAI,SAAS,CAAT,EAAY,GAAZ,EAAiB,EAAjB,KAAwB,GAAG,GAAH,EAAQ,EAApC,EAAwC;AACtC,iBAAS,MAAT,CAAgB,CAAhB,EAAmB,CAAnB;AACA;AACD;AACF;AACF;AA5CY,CAAf","file":"clickoutside-compiled.js","sourcesContent":["import Vue from 'vue';\nimport { on } from 'element-ui/src/utils/dom';\n\nconst nodeList = [];\nconst ctx = '@@clickoutsideContext';\n\nlet startClick;\n\n!Vue.prototype.$isServer && on(document, 'mousedown', e => (startClick = e));\n\n!Vue.prototype.$isServer && on(document, 'mouseup', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n/**\n * v-clickoutside\n * @desc 点击元素外面才会触发的事件\n * @example\n * ```vue\n * <div v-element-clickoutside=\"handleClose\">\n * ```\n */\nexport default {\n  bind(el, binding, vnode) {\n    const id = nodeList.push(el) - 1;\n    const documentHandler = function(mouseup = {}, mousedown = {}) {\n      if (!vnode.context ||\n        !mouseup.target ||\n        !mousedown.target ||\n        el.contains(mouseup.target) ||\n        el.contains(mousedown.target) ||\n        el === mouseup.target ||\n        (vnode.context.popperElm &&\n        (vnode.context.popperElm.contains(mouseup.target) ||\n        vnode.context.popperElm.contains(mousedown.target)))) return;\n\n      if (binding.expression &&\n        el[ctx].methodName &&\n        vnode.context[el[ctx].methodName]) {\n        vnode.context[el[ctx].methodName]();\n      } else {\n        el[ctx].bindingFn && el[ctx].bindingFn();\n      }\n    };\n    el[ctx] = {\n      id,\n      documentHandler,\n      methodName: binding.expression,\n      bindingFn: binding.value\n    };\n  },\n\n  update(el, binding) {\n    el[ctx].methodName = binding.expression;\n    el[ctx].bindingFn = binding.value;\n  },\n\n  unbind(el) {\n    let len = nodeList.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodeList[i][ctx].id === el[ctx].id) {\n        nodeList.splice(i, 1);\n        break;\n      }\n    }\n  }\n};\n"]}