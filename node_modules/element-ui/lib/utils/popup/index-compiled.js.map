{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,UAAR,GAAqB,IAArB;AACA,QAAQ,YAAR,GAAuB,SAAvB;;AAEA,IAAI,OAAO,QAAQ,KAAR,CAAX;;AAEA,IAAI,QAAQ,uBAAuB,IAAvB,CAAZ;;AAEA,IAAI,SAAS,QAAQ,4BAAR,CAAb;;AAEA,IAAI,UAAU,uBAAuB,MAAvB,CAAd;;AAEA,IAAI,gBAAgB,QAAQ,0CAAR,CAApB;;AAEA,IAAI,iBAAiB,uBAAuB,aAAvB,CAArB;;AAEA,IAAI,kBAAkB,QAAQ,oBAAR,CAAtB;;AAEA,IAAI,mBAAmB,uBAAuB,eAAvB,CAAvB;;AAEA,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AAAE,SAAO,OAAO,IAAI,UAAX,GAAwB,GAAxB,GAA8B,EAAE,SAAS,GAAX,EAArC;AAAwD;;AAE/F,IAAI,SAAS,CAAb;AACA,IAAI,cAAc,EAAlB;;AAEA,IAAI,iBAAiB,SAAS,cAAT,CAAwB,UAAxB,EAAoC;AACvD,MAAI,YAAY,OAAZ,CAAoB,UAApB,MAAoC,CAAC,CAAzC,EAA4C;;AAE5C,MAAI,iBAAiB,SAAS,cAAT,CAAwB,OAAxB,EAAiC;AACpD,QAAI,WAAW,QAAQ,OAAvB;AACA,QAAI,CAAC,QAAL,EAAe;AACb,UAAI,WAAW,QAAQ,eAAvB;AACA,UAAI,SAAS,OAAb,EAAsB;AACpB,mBAAW,SAAS,OAApB;AACD;AACF;AACD,WAAO,QAAP;AACD,GATD;;AAWA,QAAM,OAAN,CAAc,UAAd,CAAyB,UAAzB,EAAqC;AACnC,gBAAY,SAAS,UAAT,CAAoB,EAApB,EAAwB;AAClC,UAAI,WAAW,eAAe,EAAf,CAAf;;AAEA,UAAI,QAAJ,EAAc;AACZ,iBAAS,WAAT,IAAwB,SAAS,WAAT,EAAxB;AACD;AACF,KAPkC;AAQnC,gBAAY,SAAS,UAAT,CAAoB,EAApB,EAAwB;AAClC,UAAI,WAAW,eAAe,EAAf,CAAf;;AAEA,UAAI,QAAJ,EAAc;AACZ,iBAAS,YAAT,IAAyB,SAAS,YAAT,EAAzB;AACD;AACF;AAdkC,GAArC;AAgBD,CA9BD;;AAgCA,IAAI,iBAAiB,KAAK,CAA1B;;AAEA,IAAI,SAAS,SAAS,MAAT,CAAgB,GAAhB,EAAqB;AAChC,MAAI,IAAI,QAAJ,KAAiB,CAArB,EAAwB;AACtB,UAAM,IAAI,kBAAJ,IAA0B,IAAI,WAApC;AACA,WAAO,GAAP;AACD;AACD,SAAO,GAAP;AACD,CAND;;AAQA,QAAQ,OAAR,GAAkB;AAChB,SAAO;AACL,UAAM,SADD;AAEL,WAAO;AAFF,GADS;AAKhB,SAAO;AACL,aAAS;AACP,YAAM,OADC;AAEP,eAAS;AAFF,KADJ;AAKL,gBAAY;AACV,YAAM,MADI;AAEV,eAAS;AAFC,KALP;AASL,eAAW,EATN;AAUL,gBAAY,EAVP;AAWL,YAAQ,EAXH;AAYL,WAAO;AACL,YAAM,OADD;AAEL,eAAS;AAFJ,KAZF;AAgBL,eAAW;AACT,YAAM,OADG;AAET,eAAS;AAFA,KAhBN;AAoBL,gBAAY,EApBP;AAqBL,uBAAmB;AACjB,YAAM,OADW;AAEjB,eAAS;AAFQ,KArBd;AAyBL,gBAAY;AACV,YAAM,OADI;AAEV,eAAS;AAFC,KAzBP;AA6BL,wBAAoB;AAClB,YAAM,OADY;AAElB,eAAS;AAFS,KA7Bf;AAiCL,uBAAmB;AACjB,YAAM,OADW;AAEjB,eAAS;AAFQ;AAjCd,GALS;;AA4ChB,WAAS,SAAS,OAAT,GAAmB;AAC1B,QAAI,KAAK,UAAT,EAAqB;AACnB,qBAAe,KAAK,UAApB;AACD;AACF,GAhDe;AAiDhB,eAAa,SAAS,WAAT,GAAuB;AAClC,SAAK,QAAL,GAAgB,WAAW,QAA3B;AACA,mBAAe,OAAf,CAAuB,QAAvB,CAAgC,KAAK,QAArC,EAA+C,IAA/C;AACD,GApDe;AAqDhB,iBAAe,SAAS,aAAT,GAAyB;AACtC,mBAAe,OAAf,CAAuB,UAAvB,CAAkC,KAAK,QAAvC;AACA,mBAAe,OAAf,CAAuB,UAAvB,CAAkC,KAAK,QAAvC;AACA,QAAI,KAAK,KAAL,IAAc,KAAK,YAAL,KAAsB,IAApC,IAA4C,KAAK,YAAL,KAAsB,QAAtE,EAAgF;AAC9E,eAAS,IAAT,CAAc,KAAd,CAAoB,QAApB,GAA+B,KAAK,YAApC;AACA,eAAS,IAAT,CAAc,KAAd,CAAoB,YAApB,GAAmC,KAAK,gBAAxC;AACD;AACD,SAAK,YAAL,GAAoB,IAApB;AACA,SAAK,gBAAL,GAAwB,IAAxB;AACD,GA9De;AA+DhB,QAAM,SAAS,IAAT,GAAgB;AACpB,WAAO;AACL,cAAQ,KADH;AAEL,oBAAc,IAFT;AAGL,wBAAkB,IAHb;AAIL,gBAAU;AAJL,KAAP;AAMD,GAtEe;;AAyEhB,SAAO;AACL,aAAS,SAAS,OAAT,CAAiB,GAAjB,EAAsB;AAC7B,UAAI,QAAQ,IAAZ;;AAEA,UAAI,GAAJ,EAAS;AACP,YAAI,KAAK,QAAT,EAAmB;AACnB,YAAI,CAAC,KAAK,QAAV,EAAoB;AAClB,eAAK,QAAL,GAAgB,IAAhB;AACA,gBAAM,OAAN,CAAc,QAAd,CAAuB,YAAY;AACjC,kBAAM,IAAN;AACD,WAFD;AAGD,SALD,MAKO;AACL,eAAK,IAAL;AACD;AACF,OAVD,MAUO;AACL,aAAK,KAAL;AACD;AACF;AAjBI,GAzES;;AA6FhB,WAAS;AACP,UAAM,SAAS,IAAT,CAAc,OAAd,EAAuB;AAC3B,UAAI,SAAS,IAAb;;AAEA,UAAI,CAAC,KAAK,QAAV,EAAoB;AAClB,aAAK,QAAL,GAAgB,IAAhB;AACA,aAAK,KAAL,CAAW,gBAAX,EAA6B,IAA7B;AACD;;AAED,UAAI,QAAQ,CAAC,GAAG,QAAQ,OAAZ,EAAqB,EAArB,EAAyB,KAAK,MAAL,IAAe,IAAxC,EAA8C,OAA9C,CAAZ;;AAEA,UAAI,KAAK,WAAT,EAAsB;AACpB,qBAAa,KAAK,WAAlB;AACA,aAAK,WAAL,GAAmB,IAAnB;AACD;AACD,mBAAa,KAAK,UAAlB;;AAEA,UAAI,YAAY,OAAO,MAAM,SAAb,CAAhB;AACA,UAAI,YAAY,CAAhB,EAAmB;AACjB,aAAK,UAAL,GAAkB,WAAW,YAAY;AACvC,iBAAO,UAAP,GAAoB,IAApB;AACA,iBAAO,MAAP,CAAc,KAAd;AACD,SAHiB,EAGf,SAHe,CAAlB;AAID,OALD,MAKO;AACL,aAAK,MAAL,CAAY,KAAZ;AACD;AACF,KA1BM;AA2BP,YAAQ,SAAS,MAAT,CAAgB,KAAhB,EAAuB;AAC7B,UAAI,KAAK,SAAT,EAAoB;AACpB,UAAI,KAAK,QAAL,IAAiB,CAAC,KAAK,QAAL,EAAtB,EAAuC;AACvC,UAAI,KAAK,MAAT,EAAiB;;AAEjB,WAAK,QAAL,GAAgB,IAAhB;;AAEA,WAAK,KAAL,CAAW,gBAAX,EAA6B,IAA7B;;AAEA,UAAI,MAAM,OAAO,KAAK,GAAZ,CAAV;;AAEA,UAAI,QAAQ,MAAM,KAAlB;;AAEA,UAAI,SAAS,MAAM,MAAnB;AACA,UAAI,MAAJ,EAAY;AACV,uBAAe,OAAf,CAAuB,MAAvB,GAAgC,MAAhC;AACD;;AAED,UAAI,KAAJ,EAAW;AACT,YAAI,KAAK,QAAT,EAAmB;AACjB,yBAAe,OAAf,CAAuB,UAAvB,CAAkC,KAAK,QAAvC;AACA,eAAK,QAAL,GAAgB,KAAhB;AACD;AACD,uBAAe,OAAf,CAAuB,SAAvB,CAAiC,KAAK,QAAtC,EAAgD,eAAe,OAAf,CAAuB,UAAvB,EAAhD,EAAqF,KAAK,iBAAL,GAAyB,SAAzB,GAAqC,GAA1H,EAA+H,MAAM,UAArI,EAAiJ,MAAM,SAAvJ;AACA,YAAI,MAAM,UAAV,EAAsB;AACpB,cAAI,CAAC,KAAK,YAAV,EAAwB;AACtB,iBAAK,gBAAL,GAAwB,SAAS,IAAT,CAAc,KAAd,CAAoB,YAA5C;AACA,iBAAK,YAAL,GAAoB,SAAS,IAAT,CAAc,KAAd,CAAoB,QAAxC;AACD;AACD,2BAAiB,CAAC,GAAG,iBAAiB,OAArB,GAAjB;AACA,cAAI,kBAAkB,SAAS,eAAT,CAAyB,YAAzB,GAAwC,SAAS,IAAT,CAAc,YAA5E;AACA,cAAI,iBAAiB,CAAjB,IAAsB,eAA1B,EAA2C;AACzC,qBAAS,IAAT,CAAc,KAAd,CAAoB,YAApB,GAAmC,iBAAiB,IAApD;AACD;AACD,mBAAS,IAAT,CAAc,KAAd,CAAoB,QAApB,GAA+B,QAA/B;AACD;AACF;;AAED,UAAI,iBAAiB,GAAjB,EAAsB,QAAtB,KAAmC,QAAvC,EAAiD;AAC/C,YAAI,KAAJ,CAAU,QAAV,GAAqB,UAArB;AACD;;AAED,UAAI,KAAJ,CAAU,MAAV,GAAmB,eAAe,OAAf,CAAuB,UAAvB,EAAnB;AACA,WAAK,MAAL,GAAc,IAAd;;AAEA,WAAK,MAAL,IAAe,KAAK,MAAL,EAAf;;AAEA,UAAI,CAAC,KAAK,UAAV,EAAsB;AACpB,aAAK,WAAL;AACD;AACF,KA7EM;AA8EP,iBAAa,SAAS,WAAT,GAAuB;AAClC,WAAK,QAAL,GAAgB,KAAhB;AACD,KAhFM;AAiFP,WAAO,SAAS,KAAT,GAAiB;AACtB,UAAI,SAAS,IAAb;;AAEA,UAAI,KAAK,SAAL,IAAkB,CAAC,KAAK,SAAL,EAAvB,EAAyC;;AAEzC,UAAI,KAAK,UAAL,KAAoB,IAAxB,EAA8B;AAC5B,qBAAa,KAAK,UAAlB;AACA,aAAK,UAAL,GAAkB,IAAlB;AACD;AACD,mBAAa,KAAK,WAAlB;;AAEA,UAAI,aAAa,OAAO,KAAK,UAAZ,CAAjB;;AAEA,UAAI,aAAa,CAAjB,EAAoB;AAClB,aAAK,WAAL,GAAmB,WAAW,YAAY;AACxC,iBAAO,WAAP,GAAqB,IAArB;AACA,iBAAO,OAAP;AACD,SAHkB,EAGhB,UAHgB,CAAnB;AAID,OALD,MAKO;AACL,aAAK,OAAL;AACD;AACF,KAtGM;AAuGP,aAAS,SAAS,OAAT,GAAmB;AAC1B,UAAI,SAAS,IAAb;;AAEA,WAAK,KAAL,CAAW,gBAAX,EAA6B,KAA7B;AACA,WAAK,QAAL,GAAgB,IAAhB;;AAEA,WAAK,OAAL,IAAgB,KAAK,OAAL,EAAhB;;AAEA,UAAI,KAAK,UAAT,EAAqB;AACnB,mBAAW,YAAY;AACrB,cAAI,OAAO,KAAP,IAAgB,OAAO,YAAP,KAAwB,QAA5C,EAAsD;AACpD,qBAAS,IAAT,CAAc,KAAd,CAAoB,QAApB,GAA+B,OAAO,YAAtC;AACA,qBAAS,IAAT,CAAc,KAAd,CAAoB,YAApB,GAAmC,OAAO,gBAA1C;AACD;AACD,iBAAO,YAAP,GAAsB,IAAtB;AACA,iBAAO,gBAAP,GAA0B,IAA1B;AACD,SAPD,EAOG,GAPH;AAQD;;AAED,WAAK,MAAL,GAAc,KAAd;;AAEA,UAAI,CAAC,KAAK,UAAV,EAAsB;AACpB,aAAK,YAAL;AACD;AACF,KA/HM;AAgIP,kBAAc,SAAS,YAAT,GAAwB;AACpC,qBAAe,OAAf,CAAuB,UAAvB,CAAkC,KAAK,QAAvC;AACA,WAAK,QAAL,GAAgB,KAAhB;AACD;AAnIM;AA7FO,CAAlB;AAmOA,QAAQ,YAAR,GAAuB,eAAe,OAAtC","file":"index-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.PopupManager = undefined;\n\nvar _vue = require('vue');\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _merge = require('element-ui/lib/utils/merge');\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _popupManager = require('element-ui/lib/utils/popup/popup-manager');\n\nvar _popupManager2 = _interopRequireDefault(_popupManager);\n\nvar _scrollbarWidth = require('../scrollbar-width');\n\nvar _scrollbarWidth2 = _interopRequireDefault(_scrollbarWidth);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar idSeed = 1;\nvar transitions = [];\n\nvar hookTransition = function hookTransition(transition) {\n  if (transitions.indexOf(transition) !== -1) return;\n\n  var getVueInstance = function getVueInstance(element) {\n    var instance = element.__vue__;\n    if (!instance) {\n      var textNode = element.previousSibling;\n      if (textNode.__vue__) {\n        instance = textNode.__vue__;\n      }\n    }\n    return instance;\n  };\n\n  _vue2.default.transition(transition, {\n    afterEnter: function afterEnter(el) {\n      var instance = getVueInstance(el);\n\n      if (instance) {\n        instance.doAfterOpen && instance.doAfterOpen();\n      }\n    },\n    afterLeave: function afterLeave(el) {\n      var instance = getVueInstance(el);\n\n      if (instance) {\n        instance.doAfterClose && instance.doAfterClose();\n      }\n    }\n  });\n};\n\nvar scrollBarWidth = void 0;\n\nvar getDOM = function getDOM(dom) {\n  if (dom.nodeType === 3) {\n    dom = dom.nextElementSibling || dom.nextSibling;\n    getDOM(dom);\n  }\n  return dom;\n};\n\nexports.default = {\n  model: {\n    prop: 'visible',\n    event: 'visible-change'\n  },\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    transition: {\n      type: String,\n      default: ''\n    },\n    openDelay: {},\n    closeDelay: {},\n    zIndex: {},\n    modal: {\n      type: Boolean,\n      default: false\n    },\n    modalFade: {\n      type: Boolean,\n      default: true\n    },\n    modalClass: {},\n    modalAppendToBody: {\n      type: Boolean,\n      default: false\n    },\n    lockScroll: {\n      type: Boolean,\n      default: true\n    },\n    closeOnPressEscape: {\n      type: Boolean,\n      default: false\n    },\n    closeOnClickModal: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  created: function created() {\n    if (this.transition) {\n      hookTransition(this.transition);\n    }\n  },\n  beforeMount: function beforeMount() {\n    this._popupId = 'popup-' + idSeed++;\n    _popupManager2.default.register(this._popupId, this);\n  },\n  beforeDestroy: function beforeDestroy() {\n    _popupManager2.default.deregister(this._popupId);\n    _popupManager2.default.closeModal(this._popupId);\n    if (this.modal && this.bodyOverflow !== null && this.bodyOverflow !== 'hidden') {\n      document.body.style.overflow = this.bodyOverflow;\n      document.body.style.paddingRight = this.bodyPaddingRight;\n    }\n    this.bodyOverflow = null;\n    this.bodyPaddingRight = null;\n  },\n  data: function data() {\n    return {\n      opened: false,\n      bodyOverflow: null,\n      bodyPaddingRight: null,\n      rendered: false\n    };\n  },\n\n\n  watch: {\n    visible: function visible(val) {\n      var _this = this;\n\n      if (val) {\n        if (this._opening) return;\n        if (!this.rendered) {\n          this.rendered = true;\n          _vue2.default.nextTick(function () {\n            _this.open();\n          });\n        } else {\n          this.open();\n        }\n      } else {\n        this.close();\n      }\n    }\n  },\n\n  methods: {\n    open: function open(options) {\n      var _this2 = this;\n\n      if (!this.rendered) {\n        this.rendered = true;\n        this.$emit('visible-change', true);\n      }\n\n      var props = (0, _merge2.default)({}, this.$props || this, options);\n\n      if (this._closeTimer) {\n        clearTimeout(this._closeTimer);\n        this._closeTimer = null;\n      }\n      clearTimeout(this._openTimer);\n\n      var openDelay = Number(props.openDelay);\n      if (openDelay > 0) {\n        this._openTimer = setTimeout(function () {\n          _this2._openTimer = null;\n          _this2.doOpen(props);\n        }, openDelay);\n      } else {\n        this.doOpen(props);\n      }\n    },\n    doOpen: function doOpen(props) {\n      if (this.$isServer) return;\n      if (this.willOpen && !this.willOpen()) return;\n      if (this.opened) return;\n\n      this._opening = true;\n\n      this.$emit('visible-change', true);\n\n      var dom = getDOM(this.$el);\n\n      var modal = props.modal;\n\n      var zIndex = props.zIndex;\n      if (zIndex) {\n        _popupManager2.default.zIndex = zIndex;\n      }\n\n      if (modal) {\n        if (this._closing) {\n          _popupManager2.default.closeModal(this._popupId);\n          this._closing = false;\n        }\n        _popupManager2.default.openModal(this._popupId, _popupManager2.default.nextZIndex(), this.modalAppendToBody ? undefined : dom, props.modalClass, props.modalFade);\n        if (props.lockScroll) {\n          if (!this.bodyOverflow) {\n            this.bodyPaddingRight = document.body.style.paddingRight;\n            this.bodyOverflow = document.body.style.overflow;\n          }\n          scrollBarWidth = (0, _scrollbarWidth2.default)();\n          var bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\n          if (scrollBarWidth > 0 && bodyHasOverflow) {\n            document.body.style.paddingRight = scrollBarWidth + 'px';\n          }\n          document.body.style.overflow = 'hidden';\n        }\n      }\n\n      if (getComputedStyle(dom).position === 'static') {\n        dom.style.position = 'absolute';\n      }\n\n      dom.style.zIndex = _popupManager2.default.nextZIndex();\n      this.opened = true;\n\n      this.onOpen && this.onOpen();\n\n      if (!this.transition) {\n        this.doAfterOpen();\n      }\n    },\n    doAfterOpen: function doAfterOpen() {\n      this._opening = false;\n    },\n    close: function close() {\n      var _this3 = this;\n\n      if (this.willClose && !this.willClose()) return;\n\n      if (this._openTimer !== null) {\n        clearTimeout(this._openTimer);\n        this._openTimer = null;\n      }\n      clearTimeout(this._closeTimer);\n\n      var closeDelay = Number(this.closeDelay);\n\n      if (closeDelay > 0) {\n        this._closeTimer = setTimeout(function () {\n          _this3._closeTimer = null;\n          _this3.doClose();\n        }, closeDelay);\n      } else {\n        this.doClose();\n      }\n    },\n    doClose: function doClose() {\n      var _this4 = this;\n\n      this.$emit('visible-change', false);\n      this._closing = true;\n\n      this.onClose && this.onClose();\n\n      if (this.lockScroll) {\n        setTimeout(function () {\n          if (_this4.modal && _this4.bodyOverflow !== 'hidden') {\n            document.body.style.overflow = _this4.bodyOverflow;\n            document.body.style.paddingRight = _this4.bodyPaddingRight;\n          }\n          _this4.bodyOverflow = null;\n          _this4.bodyPaddingRight = null;\n        }, 200);\n      }\n\n      this.opened = false;\n\n      if (!this.transition) {\n        this.doAfterClose();\n      }\n    },\n    doAfterClose: function doAfterClose() {\n      _popupManager2.default.closeModal(this._popupId);\n      this._closing = false;\n    }\n  }\n};\nexports.PopupManager = _popupManager2.default;"]}