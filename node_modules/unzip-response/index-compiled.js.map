{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,cAAc,QAAQ,QAAR,EAAkB,WAApC;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe;AAC/B;AACA,KAAI,CAAC,MAAD,EAAS,SAAT,EAAoB,OAApB,CAA4B,IAAI,OAAJ,CAAY,kBAAZ,CAA5B,MAAiE,CAAC,CAAtE,EAAyE;AACxE,SAAO,GAAP;AACA;;AAED,KAAI,QAAQ,KAAK,WAAL,EAAZ;AACA,KAAI,SAAS,IAAI,WAAJ,EAAb;;AAEA,QAAO,WAAP,GAAqB,IAAI,WAAzB;AACA,QAAO,OAAP,GAAiB,IAAI,OAArB;AACA,QAAO,UAAP,GAAoB,IAAI,UAAxB;AACA,QAAO,QAAP,GAAkB,IAAI,QAAtB;AACA,QAAO,WAAP,GAAqB,IAAI,WAAzB;AACA,QAAO,UAAP,GAAoB,IAAI,UAAJ,CAAe,IAAf,CAAoB,GAApB,CAApB;AACA,QAAO,UAAP,GAAoB,IAAI,UAAxB;AACA,QAAO,aAAP,GAAuB,IAAI,aAA3B;AACA,QAAO,MAAP,GAAgB,IAAI,MAApB;;AAEA,OAAM,EAAN,CAAS,OAAT,EAAkB,UAAU,GAAV,EAAe;AAChC,MAAI,IAAI,IAAJ,KAAa,aAAjB,EAAgC;AAC/B,UAAO,GAAP;AACA;AACA;;AAED,SAAO,IAAP,CAAY,OAAZ,EAAqB,GAArB;AACA,EAPD;;AASA,KAAI,IAAJ,CAAS,KAAT,EAAgB,IAAhB,CAAqB,MAArB;;AAEA,QAAO,MAAP;AACA,CA/BD","file":"index-compiled.js","sourcesContent":["'use strict';\nvar PassThrough = require('stream').PassThrough;\nvar zlib = require('zlib');\n\nmodule.exports = function (res) {\n\t// TODO: use Array#includes when targeting Node.js 6\n\tif (['gzip', 'deflate'].indexOf(res.headers['content-encoding']) === -1) {\n\t\treturn res;\n\t}\n\n\tvar unzip = zlib.createUnzip();\n\tvar stream = new PassThrough();\n\n\tstream.httpVersion = res.httpVersion;\n\tstream.headers = res.headers;\n\tstream.rawHeaders = res.rawHeaders;\n\tstream.trailers = res.trailers;\n\tstream.rawTrailers = res.rawTrailers;\n\tstream.setTimeout = res.setTimeout.bind(res);\n\tstream.statusCode = res.statusCode;\n\tstream.statusMessage = res.statusMessage;\n\tstream.socket = res.socket;\n\n\tunzip.on('error', function (err) {\n\t\tif (err.code === 'Z_BUF_ERROR') {\n\t\t\tstream.end();\n\t\t\treturn;\n\t\t}\n\n\t\tstream.emit('error', err);\n\t});\n\n\tres.pipe(unzip).pipe(stream);\n\n\treturn stream;\n};\n"]}