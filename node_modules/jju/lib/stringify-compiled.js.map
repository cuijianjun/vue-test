{"version":3,"sources":["stringify.js"],"names":[],"mappings":"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","file":"stringify-compiled.js","sourcesContent":["/*\n * Author: Alex Kocharin <alex@kocharin.ru>\n * GIT: https://github.com/rlidwka/jju\n * License: WTFPL, grab your copy here: http://www.wtfpl.net/txt/copying/\n */\n\nvar Uni = require('./unicode')\n\n// Fix Function#name on browsers that do not support it (IE)\n// http://stackoverflow.com/questions/6903762/function-name-not-supported-in-ie\nif (!(function f(){}).name) {\n  Object.defineProperty((function(){}).constructor.prototype, 'name', {\n    get: function() {\n      var name = this.toString().match(/^\\s*function\\s*(\\S*)\\s*\\(/)[1]\n      // For better performance only parse once, and then cache the\n      // result through a new accessor for repeated access.\n      Object.defineProperty(this, 'name', { value: name })\n      return name\n    }\n  })\n}\n\nvar special_chars = {\n  0: '\\\\0', // this is not an octal literal\n  8: '\\\\b',\n  9: '\\\\t',\n  10: '\\\\n',\n  11: '\\\\v',\n  12: '\\\\f',\n  13: '\\\\r',\n  92: '\\\\\\\\',\n}\n\n// for oddballs\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\n// some people escape those, so I'd copy this to be safe\nvar escapable = /[\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/\n\nfunction _stringify(object, options, recursiveLvl, currentKey) {\n  var json5 = (options.mode === 'json5' || !options.mode)\n  /*\n   * Opinionated decision warning:\n   *\n   * Objects are serialized in the following form:\n   * { type: 'Class', data: DATA }\n   *\n   * Class is supposed to be a function, and new Class(DATA) is\n   * supposed to be equivalent to the original value\n   */\n  /*function custom_type() {\n    return stringify({\n      type: object.constructor.name,\n      data: object.toString()\n    })\n  }*/\n\n  // if add, it's an internal indentation, so we add 1 level and a eol\n  // if !add, it's an ending indentation, so we just indent\n  function indent(str, add) {\n    var prefix = options._prefix ? options._prefix : ''\n    if (!options.indent) return prefix + str\n    var result = ''\n    var count = recursiveLvl + (add || 0)\n    for (var i=0; i<count; i++) result += options.indent\n    return prefix + result + str + (add ? '\\n' : '')\n  }\n\n  function _stringify_key(key) {\n    if (options.quote_keys) return _stringify_str(key)\n    if (String(Number(key)) == key && key[0] != '-') return key\n    if (key == '') return _stringify_str(key)\n\n    var result = ''\n    for (var i=0; i<key.length; i++) {\n      if (i > 0) {\n        if (!Uni.isIdentifierPart(key[i]))\n          return _stringify_str(key)\n\n      } else {\n        if (!Uni.isIdentifierStart(key[i]))\n          return _stringify_str(key)\n      }\n\n      var chr = key.charCodeAt(i)\n\n      if (options.ascii) {\n        if (chr < 0x80) {\n          result += key[i]\n\n        } else {\n          result += '\\\\u' + ('0000' + chr.toString(16)).slice(-4)\n        }\n\n      } else {\n        if (escapable.exec(key[i])) {\n          result += '\\\\u' + ('0000' + chr.toString(16)).slice(-4)\n\n        } else {\n          result += key[i]\n        }\n      }\n    }\n\n    return result\n  }\n\n  function _stringify_str(key) {\n    var quote = options.quote\n    var quoteChr = quote.charCodeAt(0)\n\n    var result = ''\n    for (var i=0; i<key.length; i++) {\n      var chr = key.charCodeAt(i)\n\n      if (chr < 0x10) {\n        if (chr === 0 && json5) {\n          result += '\\\\0'\n        } else if (chr >= 8 && chr <= 13 && (json5 || chr !== 11)) {\n          result += special_chars[chr]\n        } else if (json5) {\n          result += '\\\\x0' + chr.toString(16)\n        } else {\n          result += '\\\\u000' + chr.toString(16)\n        }\n\n      } else if (chr < 0x20) {\n        if (json5) {\n          result += '\\\\x' + chr.toString(16)\n        } else {\n          result += '\\\\u00' + chr.toString(16)\n        }\n\n      } else if (chr >= 0x20 && chr < 0x80) {\n        // ascii range\n        if (chr === 47 && i && key[i-1] === '<') {\n          // escaping slashes in </script>\n          result += '\\\\' + key[i]\n\n        } else if (chr === 92) {\n          result += '\\\\\\\\'\n\n        } else if (chr === quoteChr) {\n          result += '\\\\' + quote\n\n        } else {\n          result += key[i]\n        }\n\n      } else if (options.ascii || Uni.isLineTerminator(key[i]) || escapable.exec(key[i])) {\n        if (chr < 0x100) {\n          if (json5) {\n            result += '\\\\x' + chr.toString(16)\n          } else {\n            result += '\\\\u00' + chr.toString(16)\n          }\n\n        } else if (chr < 0x1000) {\n          result += '\\\\u0' + chr.toString(16)\n\n        } else if (chr < 0x10000) {\n          result += '\\\\u' + chr.toString(16)\n\n        } else {\n          throw Error('weird codepoint')\n        }\n      } else {\n        result += key[i]\n      }\n    }\n    return quote + result + quote\n  }\n\n  function _stringify_object() {\n    if (object === null) return 'null'\n    var result = []\n      , len = 0\n      , braces\n\n    if (Array.isArray(object)) {\n      braces = '[]'\n      for (var i=0; i<object.length; i++) {\n        var s = _stringify(object[i], options, recursiveLvl+1, String(i))\n        if (s === undefined) s = 'null'\n        len += s.length + 2\n        result.push(s + ',')\n      }\n\n    } else {\n      braces = '{}'\n      var fn = function(key) {\n        var t = _stringify(object[key], options, recursiveLvl+1, key)\n        if (t !== undefined) {\n          t = _stringify_key(key) + ':' + (options.indent ? ' ' : '') + t + ','\n          len += t.length + 1\n          result.push(t)\n        }\n      }\n\n      if (Array.isArray(options.replacer)) {\n        for (var i=0; i<options.replacer.length; i++)\n          if (hasOwnProperty.call(object, options.replacer[i]))\n            fn(options.replacer[i])\n      } else {\n        var keys = Object.keys(object)\n        if (options.sort_keys)\n          keys = keys.sort(typeof(options.sort_keys) === 'function'\n                           ? options.sort_keys : undefined)\n        keys.forEach(fn)\n      }\n    }\n\n    // objects shorter than 30 characters are always inlined\n    // objects longer than 60 characters are always splitted to multiple lines\n    // anything in the middle depends on indentation level\n    len -= 2\n    if (options.indent && (len > options._splitMax - recursiveLvl * options.indent.length || len > options._splitMin) ) {\n      // remove trailing comma in multiline if asked to\n      if (options.no_trailing_comma && result.length) {\n        result[result.length-1] = result[result.length-1].substring(0, result[result.length-1].length-1)\n      }\n\n      var innerStuff = result.map(function(x) {return indent(x, 1)}).join('')\n      return braces[0]\n          + (options.indent ? '\\n' : '')\n          + innerStuff\n          + indent(braces[1])\n    } else {\n      // always remove trailing comma in one-lined arrays\n      if (result.length) {\n        result[result.length-1] = result[result.length-1].substring(0, result[result.length-1].length-1)\n      }\n\n      var innerStuff = result.join(options.indent ? ' ' : '')\n      return braces[0]\n          + innerStuff\n          + braces[1]\n    }\n  }\n\n  function _stringify_nonobject(object) {\n    if (typeof(options.replacer) === 'function') {\n      object = options.replacer.call(null, currentKey, object)\n    }\n\n    switch(typeof(object)) {\n      case 'string':\n        return _stringify_str(object)\n\n      case 'number':\n        if (object === 0 && 1/object < 0) {\n          // Opinionated decision warning:\n          //\n          // I want cross-platform negative zero in all js engines\n          // I know they're equal, but why lose that tiny bit of\n          // information needlessly?\n          return '-0'\n        }\n        if (!json5 && !Number.isFinite(object)) {\n          // json don't support infinity (= sucks)\n          return 'null'\n        }\n        return object.toString()\n\n      case 'boolean':\n        return object.toString()\n\n      case 'undefined':\n        return undefined\n\n      case 'function':\n//        return custom_type()\n\n      default:\n        // fallback for something weird\n        return JSON.stringify(object)\n    }\n  }\n\n  if (options._stringify_key) {\n    return _stringify_key(object)\n  }\n\n  if (typeof(object) === 'object') {\n    if (object === null) return 'null'\n\n    var str\n    if (typeof(str = object.toJSON5) === 'function' && options.mode !== 'json') {\n      object = str.call(object, currentKey)\n\n    } else if (typeof(str = object.toJSON) === 'function') {\n      object = str.call(object, currentKey)\n    }\n\n    if (object === null) return 'null'\n    if (typeof(object) !== 'object') return _stringify_nonobject(object)\n\n    if (object.constructor === Number || object.constructor === Boolean || object.constructor === String) {\n      object = object.valueOf()\n      return _stringify_nonobject(object)\n\n    } else if (object.constructor === Date) {\n      // only until we can't do better\n      return _stringify_nonobject(object.toISOString())\n\n    } else {\n      if (typeof(options.replacer) === 'function') {\n        object = options.replacer.call(null, currentKey, object)\n        if (typeof(object) !== 'object') return _stringify_nonobject(object)\n      }\n\n      return _stringify_object(object)\n    }\n  } else {\n    return _stringify_nonobject(object)\n  }\n}\n\n/*\n * stringify(value, options)\n * or\n * stringify(value, replacer, space)\n *\n * where:\n * value - anything\n * options - object\n * replacer - function or array\n * space - boolean or number or string\n */\nmodule.exports.stringify = function stringifyJSON(object, options, _space) {\n  // support legacy syntax\n  if (typeof(options) === 'function' || Array.isArray(options)) {\n    options = {\n      replacer: options\n    }\n  } else if (typeof(options) === 'object' && options !== null) {\n    // nothing to do\n  } else {\n    options = {}\n  }\n  if (_space != null) options.indent = _space\n\n  if (options.indent == null) options.indent = '\\t'\n  if (options.quote == null) options.quote = \"'\"\n  if (options.ascii == null) options.ascii = false\n  if (options.mode == null) options.mode = 'json5'\n\n  if (options.mode === 'json' || options.mode === 'cjson') {\n    // json only supports double quotes (= sucks)\n    options.quote = '\"'\n\n    // json don't support trailing commas (= sucks)\n    options.no_trailing_comma = true\n\n    // json don't support unquoted property names (= sucks)\n    options.quote_keys = true\n  }\n\n  // why would anyone use such objects?\n  if (typeof(options.indent) === 'object') {\n    if (options.indent.constructor === Number\n    ||  options.indent.constructor === Boolean\n    ||  options.indent.constructor === String)\n      options.indent = options.indent.valueOf()\n  }\n\n  // gap is capped at 10 characters\n  if (typeof(options.indent) === 'number') {\n    if (options.indent >= 0) {\n      options.indent = Array(Math.min(~~options.indent, 10) + 1).join(' ')\n    } else {\n      options.indent = false\n    }\n  } else if (typeof(options.indent) === 'string') {\n    options.indent = options.indent.substr(0, 10)\n  }\n\n  if (options._splitMin == null) options._splitMin = 50\n  if (options._splitMax == null) options._splitMax = 70\n\n  return _stringify(object, options, 0, '')\n}\n\n"]}