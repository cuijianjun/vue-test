{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\nvar path = require('path');\nvar fs = require('graceful-fs');\nvar osenv = require('osenv');\nvar assign = require('object-assign');\nvar mkdirp = require('mkdirp');\nvar uuid = require('uuid');\nvar xdgBasedir = require('xdg-basedir');\nvar osTmpdir = require('os-tmpdir');\nvar writeFileAtomic = require('write-file-atomic');\nvar dotProp = require('dot-prop');\n\nvar user = (osenv.user() || uuid.v4()).replace(/\\\\/g, '');\nvar configDir = xdgBasedir.config || path.join(osTmpdir(), user, '.config');\nvar permissionError = 'You don\\'t have access to this file.';\nvar defaultPathMode = parseInt('0700', 8);\nvar writeFileOptions = {mode: parseInt('0600', 8)};\n\nfunction Configstore(id, defaults, opts) {\n\topts = opts || {};\n\n\tvar pathPrefix = opts.globalConfigPath ?\n\t\tpath.join(id, 'config.json') :\n\t\tpath.join('configstore', id + '.json');\n\n\tthis.path = path.join(configDir, pathPrefix);\n\n\tthis.all = assign({}, defaults || {}, this.all || {});\n}\n\nConfigstore.prototype = Object.create(Object.prototype, {\n\tall: {\n\t\tget: function () {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(fs.readFileSync(this.path, 'utf8'));\n\t\t\t} catch (err) {\n\t\t\t\t// create dir if it doesn't exist\n\t\t\t\tif (err.code === 'ENOENT') {\n\t\t\t\t\tmkdirp.sync(path.dirname(this.path), defaultPathMode);\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\n\t\t\t\t// improve the message of permission errors\n\t\t\t\tif (err.code === 'EACCES') {\n\t\t\t\t\terr.message = err.message + '\\n' + permissionError + '\\n';\n\t\t\t\t}\n\n\t\t\t\t// empty the file if it encounters invalid JSON\n\t\t\t\tif (err.name === 'SyntaxError') {\n\t\t\t\t\twriteFileAtomic.sync(this.path, '', writeFileOptions);\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t},\n\t\tset: function (val) {\n\t\t\ttry {\n\t\t\t\t// make sure the folder exists as it\n\t\t\t\t// could have been deleted in the meantime\n\t\t\t\tmkdirp.sync(path.dirname(this.path), defaultPathMode);\n\n\t\t\t\twriteFileAtomic.sync(this.path, JSON.stringify(val, null, '\\t'), writeFileOptions);\n\t\t\t} catch (err) {\n\t\t\t\t// improve the message of permission errors\n\t\t\t\tif (err.code === 'EACCES') {\n\t\t\t\t\terr.message = err.message + '\\n' + permissionError + '\\n';\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t},\n\tsize: {\n\t\tget: function () {\n\t\t\treturn Object.keys(this.all || {}).length;\n\t\t}\n\t}\n});\n\nConfigstore.prototype.get = function (key) {\n\treturn dotProp.get(this.all, key);\n};\n\nConfigstore.prototype.set = function (key, val) {\n\tvar config = this.all;\n\tif (arguments.length === 1) {\n\t\tObject.keys(key).forEach(function (k) {\n\t\t\tdotProp.set(config, k, key[k]);\n\t\t});\n\t} else {\n\t\tdotProp.set(config, key, val);\n\t}\n\tthis.all = config;\n};\n\nConfigstore.prototype.has = function (key) {\n\treturn dotProp.has(this.all, key);\n};\n\nConfigstore.prototype.delete = Configstore.prototype.del = function (key) {\n\tvar config = this.all;\n\tdotProp.delete(config, key);\n\tthis.all = config;\n};\n\nConfigstore.prototype.clear = function () {\n\tthis.all = {};\n};\n\nmodule.exports = Configstore;\n"]}