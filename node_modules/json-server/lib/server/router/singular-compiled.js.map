{"version":3,"sources":["singular.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,QAAQ,QAAQ,SAAR,CAAZ;AACA,IAAI,aAAa,QAAQ,gBAAR,CAAjB;;AAEA,OAAO,OAAP,GAAiB,UAAU,EAAV,EAAc,IAAd,EAAoB;AACnC,MAAI,SAAS,QAAQ,MAAR,EAAb;;AAEA,WAAS,IAAT,CAAc,GAAd,EAAmB,GAAnB,EAAwB,IAAxB,EAA8B;AAC5B,QAAI,MAAJ,CAAW,IAAX,GAAkB,GAAG,GAAH,CAAO,IAAP,EAAa,KAAb,EAAlB;AACA;AACD;;AAED,WAAS,MAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B,IAA1B,EAAgC;AAC9B,OAAG,GAAH,CAAO,IAAP,EAAa,IAAI,IAAjB,EAAuB,KAAvB;AACA,QAAI,MAAJ,CAAW,IAAX,GAAkB,GAAG,GAAH,CAAO,IAAP,EAAa,KAAb,EAAlB;;AAEA,QAAI,SAAJ,CAAc,+BAAd,EAA+C,UAA/C;AACA,QAAI,QAAJ,CAAc,GAAE,WAAW,GAAX,CAAgB,EAAhC;;AAEA,QAAI,MAAJ,CAAW,GAAX;AACA;AACD;;AAED,WAAS,MAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B,IAA1B,EAAgC;AAC9B,QAAI,IAAI,MAAJ,KAAe,KAAnB,EAA0B;AACxB,SAAG,GAAH,CAAO,IAAP,EAAa,IAAI,IAAjB,EAAuB,KAAvB;AACD,KAFD,MAEO;AACL,SAAG,GAAH,CAAO,IAAP,EAAa,MAAb,CAAoB,IAAI,IAAxB,EAA8B,KAA9B;AACD;;AAED,QAAI,MAAJ,CAAW,IAAX,GAAkB,GAAG,GAAH,CAAO,IAAP,EAAa,KAAb,EAAlB;AACA;AACD;;AAED,MAAI,IAAI,MAAM,EAAN,CAAR;;AAEA,SAAO,KAAP,CAAa,GAAb,EAAkB,GAAlB,CAAsB,IAAtB,EAA4B,IAA5B,CAAiC,MAAjC,EAAyC,CAAzC,EAA4C,GAA5C,CAAgD,MAAhD,EAAwD,CAAxD,EAA2D,KAA3D,CAAiE,MAAjE,EAAyE,CAAzE;;AAEA,SAAO,MAAP;AACD,CAnCD","file":"singular-compiled.js","sourcesContent":["'use strict';\n\nvar express = require('express');\nvar write = require('./write');\nvar getFullURL = require('./get-full-url');\n\nmodule.exports = function (db, name) {\n  var router = express.Router();\n\n  function show(req, res, next) {\n    res.locals.data = db.get(name).value();\n    next();\n  }\n\n  function create(req, res, next) {\n    db.set(name, req.body).value();\n    res.locals.data = db.get(name).value();\n\n    res.setHeader('Access-Control-Expose-Headers', 'Location');\n    res.location(`${getFullURL(req)}`);\n\n    res.status(201);\n    next();\n  }\n\n  function update(req, res, next) {\n    if (req.method === 'PUT') {\n      db.set(name, req.body).value();\n    } else {\n      db.get(name).assign(req.body).value();\n    }\n\n    res.locals.data = db.get(name).value();\n    next();\n  }\n\n  var w = write(db);\n\n  router.route('/').get(show).post(create, w).put(update, w).patch(update, w);\n\n  return router;\n};"]}