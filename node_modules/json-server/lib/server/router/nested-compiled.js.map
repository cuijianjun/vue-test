{"version":3,"sources":["nested.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,YAAY,QAAQ,WAAR,CAAhB;;AAEA,OAAO,OAAP,GAAiB,UAAU,IAAV,EAAgB;AAC/B,MAAI,SAAS,QAAQ,MAAR,EAAb;;AAEA;AACA,WAAS,GAAT,CAAa,GAAb,EAAkB,GAAlB,EAAuB,IAAvB,EAA6B;AAC3B,QAAI,OAAO,UAAU,QAAV,CAAmB,IAAI,MAAJ,CAAW,QAA9B,CAAX;AACA,QAAI,KAAJ,CAAW,GAAE,IAAK,GAAE,KAAK,gBAAiB,EAA1C,IAA+C,IAAI,MAAJ,CAAW,EAA1D;AACA,QAAI,GAAJ,GAAW,IAAG,IAAI,MAAJ,CAAW,MAAO,EAAhC;AACA;AACD;;AAED;AACA,WAAS,IAAT,CAAc,GAAd,EAAmB,GAAnB,EAAwB,IAAxB,EAA8B;AAC5B,QAAI,OAAO,UAAU,QAAV,CAAmB,IAAI,MAAJ,CAAW,QAA9B,CAAX;AACA,QAAI,IAAJ,CAAU,GAAE,IAAK,GAAE,KAAK,gBAAiB,EAAzC,IAA8C,IAAI,MAAJ,CAAW,EAAzD;AACA,QAAI,GAAJ,GAAW,IAAG,IAAI,MAAJ,CAAW,MAAO,EAAhC;AACA;AACD;;AAED,SAAO,OAAO,GAAP,CAAW,wBAAX,EAAqC,GAArC,EAA0C,IAA1C,CAA+C,wBAA/C,EAAyE,IAAzE,CAAP;AACD,CApBD","file":"nested-compiled.js","sourcesContent":["'use strict';\n\nvar express = require('express');\nvar pluralize = require('pluralize');\n\nmodule.exports = function (opts) {\n  var router = express.Router();\n\n  // Rewrite URL (/:resource/:id/:nested -> /:nested) and request query\n  function get(req, res, next) {\n    var prop = pluralize.singular(req.params.resource);\n    req.query[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  }\n\n  // Rewrite URL (/:resource/:id/:nested -> /:nested) and request body\n  function post(req, res, next) {\n    var prop = pluralize.singular(req.params.resource);\n    req.body[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  }\n\n  return router.get('/:resource/:id/:nested', get).post('/:resource/:id/:nested', post);\n};"]}